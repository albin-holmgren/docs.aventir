---
title: "Credentials Vault"
description: "Securely manage service credentials for AI agents"
---

# Credentials Vault

The Credentials Vault provides encrypted storage for service credentials, enabling agents to securely access your accounts.

## Security Architecture

### Encryption

All credentials are encrypted using **AES-256-GCM**:

- **Unique IV**: Each credential has a unique initialization vector
- **Master Key**: 256-bit encryption key stored separately
- **No Plain Text**: Credentials are never stored unencrypted
- **In-Memory Only**: Decrypted only during agent execution

### Access Control

- **Row Level Security (RLS)**: Users can only access their own credentials
- **Agent Scoping**: Credentials are available only to specified agents
- **Audit Logging**: All credential usage is logged
- **No Export**: Credentials cannot be exported from the system

## Adding Credentials

### Via Dashboard

1. Navigate to **Settings** → **Credentials**
2. Click **Add Credential**
3. Select service type from dropdown
4. Enter required information
5. Click **Save** (encryption happens immediately)

### Via AI Manager

The AI Manager can prompt for credentials during agent creation:

```
AI Manager: "To check your Gmail, I'll need access. Add Gmail credentials?"
[Add Credentials] [Not Now]
```

### Supported Services

| Service | Auth Type | Required Fields |
|---------|-----------|-----------------|
| Gmail | OAuth | Google account authorization |
| Outlook | OAuth | Microsoft account authorization |
| LinkedIn | OAuth | LinkedIn authorization |
| Twitter | OAuth/API Key | OAuth flow or API credentials |
| Slack | OAuth | Workspace authorization |
| Shopify | API Key | Admin API key + password |
| HubSpot | OAuth | HubSpot app authorization |
| Notion | OAuth | Notion integration |
| GitHub | OAuth | GitHub authorization |
| Stripe | API Key | Secret key |
| OpenAI | API Key | API key |

## Credential Types

### OAuth (Recommended)

OAuth provides secure, token-based access without sharing passwords:

**Benefits:**
- No passwords stored
- Tokens can be revoked
- Scoped permissions
- Automatic refresh

**Setup Process:**
1. Click **Connect** for the service
2. Complete OAuth flow in popup
3. Authorize requested permissions
4. Credential saved automatically

### Password

Username/password authentication for services without OAuth:

**Security:**
- Password encrypted immediately
- Never displayed after entry
- Can update but not view

**Setup:**
```
Service: Shopify
Username: your-store.myshopify.com
Password: your-admin-password
```

### API Key

Direct API authentication:

**Common Format:**
```
Service: OpenAI
API Key: sk-xxxxxxxxxxxxxxxxxxxxxxxx
```

**Security Best Practices:**
- Use dedicated API keys for Aventir
- Rotate keys regularly
- Set appropriate rate limits
- Monitor usage

### Cookie (Advanced)

Session persistence for complex authentication:

**Use Cases:**
- Services requiring session cookies
- Multi-step login flows
- Captcha handling

**Setup:**
Requires browser extension or manual extraction.

## Managing Credentials

### Viewing Credentials

The dashboard shows:
- Service name
- Status (Active, Expired, Error)
- Last used timestamp
- Associated agents

**Important:** Actual credential values are never displayed.

### Updating Credentials

**When to Update:**
- Password changed
- OAuth token expired
- API key rotated
- Permission scope changed

**How to Update:**
1. Find credential in list
2. Click **Update**
3. Enter new values
4. Save (old values are replaced)

### Deleting Credentials

1. Navigate to credential details
2. Click **Delete**
3. Confirm deletion
4. Associated agents will lose access

<Warning>
Deleting a credential will cause agents using it to fail. Update agents with new credentials first.
</Warning>

## Credential Health

### Monitoring Status

Credentials are monitored for:

- **Active**: Working normally
- **Expired**: OAuth token needs refresh
- **Error**: Authentication failing
- **Revoked**: Access was revoked by service

### Automatic Refresh

OAuth tokens are automatically refreshed:

- Refresh attempted 2 minutes before expiry
- New token saved automatically
- Agents continue without interruption
- Failed refreshes trigger notifications

### Health Notifications

Receive alerts when:

- OAuth token expires
- API key is invalid
- Password authentication fails
- Service reports unauthorized access

## Best Practices

### Use OAuth When Available

OAuth is more secure than passwords:

- Tokens can be revoked without changing passwords
- Scoped permissions limit access
- No password exposure
- Industry standard

### Create Dedicated Accounts

For business automation:

- Create service accounts (e.g., `automation@company.com`)
- Grant specific permissions needed
- Monitor account activity
- Separate from personal accounts

### Regular Rotation

Rotate credentials periodically:

**API Keys:**
- Rotate every 90 days
- Generate new key
- Update in Aventir
- Delete old key

**Passwords:**
- Change if suspicious activity
- Update in Aventir immediately
- Review agent access logs

### Minimal Permissions

Grant only required access:

```
Bad:  "Full access to Gmail"
Good:  "Read-only access to inbox only"

Bad:  "Admin access to Slack"
Good:  "Post to #alerts channel only"
```

### Audit Regularly

Review credential usage:

1. Go to **Settings** → **Credentials**
2. Review **Last Used** timestamps
3. Remove unused credentials
4. Check associated agents are active

## Troubleshooting

### OAuth Authorization Failed

**Symptoms:**
- OAuth popup closes without completing
- "Authorization failed" error

**Solutions:**
- Check popup blocker settings
- Ensure third-party cookies enabled
- Verify you have admin access to the service
- Try incognito/private window

### Token Expired

**Symptoms:**
- Agent fails with "Token expired"
- OAuth status shows "Expired"

**Solutions:**
- Re-authorize via dashboard
- Check if account password changed
- Verify app permissions not revoked
- Try reconnecting the service

### Invalid API Key

**Symptoms:**
- Agent fails immediately
- "Invalid API key" error

**Solutions:**
- Verify key copied completely (no truncation)
- Check if key was revoked in service dashboard
- Generate new key and update
- Verify correct key type (test vs. live)

### Rate Limit Errors

**Symptoms:**
- Agent fails with "Rate limit exceeded"
- Intermittent failures

**Solutions:**
- Reduce agent frequency
- Check service rate limits
- Upgrade service plan if needed
- Use multiple API keys (if supported)

### 2FA/MFA Issues

**Symptoms:**
- Login requires verification code
- "Additional authentication required"

**Solutions:**
- Use app passwords (Gmail, Outlook)
- Disable 2FA for automation accounts (not recommended)
- Use OAuth instead of password
- Contact service for automation account options

## Service-Specific Guides

### Gmail

**Setup:**
1. Go to **Settings** → **Credentials**
2. Select **Gmail**
3. Click **Connect with Google**
4. Choose account
5. Grant Gmail permissions

**Permissions Required:**
- Read emails
- Send emails (if needed)
- Manage labels (if needed)

**Note:** For 2FA accounts, use app-specific passwords or OAuth.

### Slack

**Setup:**
1. Go to **Settings** → **Credentials**
2. Select **Slack**
3. Click **Add to Slack**
4. Choose workspace
5. Authorize bot permissions

**Permissions Required:**
- chat:write
- channels:read
- users:read

### Shopify

**Setup:**
1. Go to Shopify Admin → Settings → Apps
2. Click **Develop apps**
3. Create private app
4. Grant necessary permissions
5. Copy Admin API key
6. Paste in Aventir credential form

**Permissions:**
- read_orders
- read_products
- read_customers

## Enterprise Features

### Credential Sharing (Teams)

For organization accounts:

- Share credentials across team
- Role-based access control
- Audit trails for compliance
- Centralized credential management

### SSO Integration

Enterprise authentication:

- SAML 2.0 support
- SCIM provisioning
- Automatic credential sync
- Identity provider integration

## Next Steps

<CardGroup cols={2}>
  <Card title="Creating Agents" icon="robot" href="/user-guide/creating-agents">
    Deploy agents that use your credentials.
  </Card>
  <Card title="Security Architecture" icon="shield" href="/architecture/security">
    Deep dive into Aventir's security model.
  </Card>
  <Card title="Integrations" icon="plug" href="/integrations/overview">
    Connect services to your agents.
  </Card>
  <Card title="API Reference" icon="code" href="/api-reference/credentials">
    Manage credentials via API.
  </Card>
</CardGroup>
